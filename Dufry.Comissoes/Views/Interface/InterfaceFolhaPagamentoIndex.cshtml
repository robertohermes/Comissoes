@model InterfaceFolhaPagamentoViewModel

@{
    ViewBag.Title = "Interface com Folha de Pagamento";
}

<h1 class="headerForm">@ViewBag.Title</h1>

<style>
.ui-datepicker-calendar {
    display: none;
    }
</style>

@using (Html.BeginForm())
{
    @*@Html.AntiForgeryToken()*@

    <div class="editorCategoria">
        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <p>
            @Html.LabelFor(model => model.CodigoFolha)
            @Html.TextBoxFor(model => model.CodigoFolha, String.Empty, new { @readonly = "readonly" })
        </p>
        <p>
            @Html.LabelFor(model => model.Empresa)
            @Html.DropDownListFor(model => model.Empresa.CodigoEmpresaAlternate, Model.EmpresasSelectListItem, "--- Selecione ---", new { @class = "autocomplete-combobox", @style = "padding-left: 7px;!important" })
            @Html.ValidationMessageFor(model => model.Empresa.CodigoEmpresaAlternate, String.Empty, new { @style = "padding-left: 40px;!important" })
        </p>
        <p>
            @Html.LabelFor(model => model.Loja)
            @Html.DropDownListFor(model => model.Loja.CodigoLojaAlternate, Model.LojasSelectListItem, "--- Selecione ---", new { @class = "autocomplete-combobox", @style = "padding-left: 7px;!important" })
            @Html.ValidationMessageFor(model => model.Loja.CodigoLojaAlternate, String.Empty, new { @style = "padding-left: 40px;!important" })
        </p>
        <p>
            @Html.LabelFor(model => model.CodigoClienteADP)
            @Html.TextBoxFor(model => model.CodigoClienteADP, String.Empty, new { @readonly = "readonly" })
        </p>
        <p>
            @Html.LabelFor(model => model.NumeroProcessoFolha)
            @Html.EditorFor(model => model.NumeroProcessoFolha)
            @Html.ValidationMessageFor(model => model.NumeroProcessoFolha, String.Empty, new { @style = "padding-left: 10px;!important" })
        </p>
        <p>
            @Html.LabelFor(model => model.MES_ANO)
            @Html.TextBoxFor(model => model.MES_ANO, null, new { @class = "dp", @Value = Model.MES_ANO.ToString().Equals("01/01/0001 00:00:00") ? string.Empty : Model.MES_ANO.ToString("dd/MM/yyyy") })
            @Html.ValidationMessageFor(model => model.MES_ANO, String.Empty, new { @style = "padding-left: 10px;!important" })
        </p>

    </div>

    <input type="submit" id="arquivoInterfaceFolhaPagamento" value="Gerar Arquivo" class="botoesCategoria" />
    @Html.ActionLink("Voltar", "InterfaceFolhaPagamentoArquivo", "Interface", null, new { @class = "botoesCategoria" })

}


@section Scripts {
    <script type="text/javascript">
        $(function () {

            $('.dp').datepicker({
                changeMonth: true,
                changeYear: true,
                showButtonPanel: true,
                dateFormat: 'dd/mm/yy',
                showAnim: "scale",
                showOptions: {
                    origin: ["top", "right"]
                },
            }).focus(function () {
                var thisCalendar = $(this);
                $('.ui-datepicker-calendar').detach();
                $('.ui-datepicker-close').click(function () {
                    var month = $("#ui-datepicker-div .ui-datepicker-month :selected").val();
                    var year = $("#ui-datepicker-div .ui-datepicker-year :selected").val();
                    thisCalendar.datepicker('setDate', new Date(year, month, 1));
                });
            });

        });

        $(document).ready(function () {
            $('.dp').mask('00/00/0000', { 'translation': { 0: { pattern: /[0-9]/ } } });


        });

        //using combobox() function of jquery ui autocomplete hides the <select> tag generated by the DropDownListFor()
        //method and renders its own html.
        //By default, hidden form controls are not validated by jquery.validate. This behaviour can be modified using the code above,
        //which will validate all hidden form controls, or to keep ignoring all hidden elements except your select
        $.validator.setDefaults({
            //validate all hidden form controls - ignore: []
            //ignore all hidden elements except those who are listed:
            ignore: ':hidden:not(#Empresa_CodigoEmpresaAlternate, #Loja_CodigoLojaAlternate)'
        });

    </script>
}



